<!-- app/features/products/product-detail/product-detail-page.html -->
@if (product$ | async; as product) {
<mat-card>
    <mat-card-header>
        <mat-card-title>{{ product.title }}</mat-card-title>
    </mat-card-header>

    <mat-card-content>
        <img mat-card-image [src]="product.thumbnail" [alt]="product.title" />
        <div class="details">
            <mat-card-subtitle>
                @if (product.sale) {
                <span class="price-original">
                    Prezzo originale:
                    {{ product.originalPrice | currency:'EUR' }}
                </span>
                <br>
                <span class="price-sale">
                    Prezzo scontato:
                    {{ product.price | currency:'EUR' }}
                </span>
                } @else {
                Prezzo:
                {{ product.price | currency:'EUR' }}
                }

            </mat-card-subtitle>
            <p>Descrizione:</p>
            <p>{{ product.description }}</p>
            <br>
            @if (product.quantity !== undefined && product.quantity !== null) {
                <p class="availability">
                    @if (product.quantity >= 10) {
                        <span class="available">{{ product.quantity }} disponibili</span>
                    } @else {
                        <span class="limited">Solo {{ product.quantity }} rimanenti</span>
                    }
                </p>
            }
            <mat-card-actions>
                <button mat-raised-button color="accent" (click)="onAddToCart(product)">
                    Aggiungi al carrello
                </button>
                <button mat-raised-button color="primary" routerLink="/products">
                    Torna al catalogo
                </button>
            </mat-card-actions>
        </div>
    </mat-card-content>
</mat-card>
}