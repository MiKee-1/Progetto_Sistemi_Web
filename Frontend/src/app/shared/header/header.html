<mat-toolbar class="header">
  <button matIconButton class="MenuButton" aria-label="Menu button" (click)="goToHome()">
    <mat-icon>menu</mat-icon>
  </button>

  <span class="Title">Sito web esame Sistemi Web</span>

  <span class="spacer"></span>

  @if (isLoggedIn()) {
    <!-- User is logged in -->
    @if (isAdmin()) {
      <button mat-button (click)="goToAdmin()">
        <mat-icon>admin_panel_settings</mat-icon>
        Admin Dashboard
      </button>
    }

    <button matIconButton
            aria-label="Shopping cart"
            (click)="goToCart()"
            [matBadge]="cartItemCount()"
            [matBadgeHidden]="cartItemCount() === 0"
            matBadgeColor="warn">
      <mat-icon>shopping_cart</mat-icon>
    </button>

    <button mat-button [matMenuTriggerFor]="userMenu" aria-label="User menu">
      <mat-icon>person</mat-icon>
      {{ currentUser()?.firstName }}
    </button>

    <mat-menu #userMenu="matMenu">
      <button mat-menu-item disabled>
        <mat-icon>email</mat-icon>
        {{ currentUser()?.email }}
      </button>
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        Logout
      </button>
    </mat-menu>
  } @else {
    <!-- User is not logged in -->
    <button mat-button (click)="goToLogin()">
      <mat-icon>login</mat-icon>
      Login
    </button>

    <button mat-button (click)="goToRegister()">
      <mat-icon>person_add</mat-icon>
      Register
    </button>
  }
</mat-toolbar>